<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title></title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

/* From extension bierner.markdown-checkbox */
.contains-task-list {
    padding-left: 0;
}

.contains-task-list li {
    margin-left: 24px;
}

.contains-task-list .task-list-item {
    list-style: none;
    padding-left: 0;
    margin-left: 0;
}

.contains-task-list .contains-task-list {
    padding-left: 20px;
} 
/* From extension davidmwhynot.markdown-higlightjs */
/*

Atom One Dark by Daniel Gamage
Original One Dark Syntax theme from https://github.com/atom/one-dark-syntax

base:    #282c34
mono-1:  #abb2bf
mono-2:  #818896
mono-3:  #5c6370
hue-1:   #56b6c2
hue-2:   #61aeee
hue-3:   #c678dd
hue-4:   #98c379
hue-5:   #e06c75
hue-5-2: #be5046
hue-6:   #d19a66
hue-6-2: #e6c07b

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #abb2bf;
  background: #282c34;
}

.hljs-comment,
.hljs-quote {
  color: #5c6370;
  font-style: italic;
}

.hljs-doctag,
.hljs-keyword,
.hljs-formula {
  color: #c678dd;
}

.hljs-section,
.hljs-name,
.hljs-selector-tag,
.hljs-deletion,
.hljs-subst {
  color: #e06c75;
}

.hljs-literal {
  color: #56b6c2;
}

.hljs-string,
.hljs-regexp,
.hljs-addition,
.hljs-attribute,
.hljs-meta-string {
  color: #98c379;
}

.hljs-built_in,
.hljs-class .hljs-title {
  color: #e6c07b;
}

.hljs-attr,
.hljs-variable,
.hljs-template-variable,
.hljs-type,
.hljs-selector-class,
.hljs-selector-attr,
.hljs-selector-pseudo,
.hljs-number {
  color: #d19a66;
}

.hljs-symbol,
.hljs-bullet,
.hljs-link,
.hljs-meta,
.hljs-selector-id,
.hljs-title {
  color: #61aeee;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}

.hljs-link {
  text-decoration: underline;
}

</style>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
        <style>

</style>
    </head>
    <body class="vscode-body vscode-dark">
        <p>unit mi.rtl.objects.methods.pageproducer;
{:&lt; - A unit <strong>@name</strong> implementa as propriedade e m√©todos para produzir
p√°gina html, semelhante a unit HTTPProd do Delphi.</p>
<ul>
<li>
<h2 id="notas"><strong>NOTAS</strong></h2>
</li>
<li>
<p><strong>VERS√ÉO</strong></p>
<ul>
<li>Alpha - Alpha - 0.8.0</li>
</ul>
</li>
<li>
<p><strong>HIST√ìRICO</strong></p>
<ul>
<li>Criado por: Paulo S√©rgio da Silva Pacheco e-mail: paulosspacheco@@yahoo.com.br
<ul>
<li>
<p><strong>23/07/2023</strong></p>
<ul>
<li>08:12 a 12:00: Criar a unit <strong>@name</strong></li>
</ul>
</li>
<li>
<p><strong>24/07/2023</strong></p>
<ul>
<li>08:45 a 12:00: Documento da unit</li>
<li>14:00 a 17:30: Documento da unit</li>
</ul>
</li>
<li>
<p><strong>25/07/2023</strong></p>
<ul>
<li>08:15 a 12:00: Documento da unit</li>
<li>13:30 a 17:30: Documento da unit</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>C√ìDIGO FONTE</strong>:</p>
<ul>
<li>@html(<a href="../units/mi.rtl.objects.pas">mi.rtl.objects.pas</a>)</li>
</ul>
</li>
</ul>
<p>}</p>
<p>{$IFDEF FPC}
{$MODE Delphi} {$H+}
{$ENDIF}</p>
<p>interface</p>
<p>uses
Classes, SysUtils,FPTemplate
,mi.rtl.Objects.Methods
,mi.rtl.Objects.Methods.Paramexecucao.Application</p>
<p>;</p>
<p>Type</p>
<p>{ TBasePageProducer }</p>
<p>TBasePageProducer = class(TObjectsMethods)
public</p>
<pre><code class="hljs">  Type

    {: O tipo **@name** usado em THTMLTagEven indicando o tipo de tag.
       - **NOTAS:**
         -  
    }
    TTag = (Tgcustom, tgLink, tgImage, tgTable, tgImageMap, tgObject, tgEmbed);

  Type
    {: O tipo **@name** usado para preencher modelos pre-fabricados de c√≥digos para preencher com var√°veis.}
    THTMLTagEvent = TReplaceTagEvent;
    //THTMLTagEvent = procedure (Sender: TObject; Tag: TTag; const TagString: string;  TagParams: TStrings; var ReplaceText: string) of object;

  public constructor create(aOwner:TComponent);override;
  public destructor destroy; override;

  {$REGION '---&gt;Constru√ß√£o da propriedade Alias'}
    Private  _Alias    : AnsiString;
    Published  Property Alias : AnsiString Read _Alias Write _Alias;
  {$ENDREGION}

  protected Function GetHTMLContent : AnsiString;Virtual;
  Public Property HTMLContent : AnsiString Read GetHTMLContent;// write SetHTMLContent;

  {$REGION '---&gt; Constru√ß√£o da propriedade OnHTMLTag'}
    Private  var _OnHTMLTag    : Boolean;
    Private Procedure SetOnHTMLTag(const aOnHTMLTag    : Boolean);
    Public Property OnHTMLTag  : Boolean Read _OnHTMLTag Write SetOnHTMLTag;
  {$ENDREGION}

  {$REGION '---&gt; Constru√ß√£o da propriedade HTMLDoc'}
    private var _HTMLDoc: TStrings;
    Private Procedure SetHTMLDoc(Const aHTMLDoc: tStrings);
    Private Function GetHTMLDoc: tStrings;
    Public Property HTMLDoc  : tStrings Read GetHTMLDoc Write SetHTMLDoc;
  {$ENDREGION}

  {$REGION '---&gt; Constru√ß√£o da propriedade HTMLFile'}
    Protected Procedure SetHTMLFile(Const aHTMLFile: TFileName );Overload;Virtual;
    Protected Private Function GetHTMLFile : TFileName;Virtual;
    Public Property HTMLFile : TFileName read GetHTMLFile Write SetHTMLFile;
    Public Procedure SetHTMLFile();Overload;Virtual;//&lt; Deve se definido em cada objeto herdado.
  {$ENDREGION}

    Public Function  SaveHTMLContentToFile(FileNameDest:AnsiString):Integer;overload ;Virtual;
    Public Function  SaveHTMLContentToFile:Integer;overload ;Virtual;

  {$REGION '---&gt; Constru√ß√£o da propriedade FPTemplate'}
    Private _FPTemplate : TFPTemplate;
    Public Property FPTemplate : TFPTemplate read _FPTemplate write _FPTemplate;
  {$ENDREGION}

  {: O m√©todo **@name** √© executado por - *@link(DoReplaceTag)*.

     - **DESCRI√á√ÉO**

       - O manipulador de eventos *DoOnHTMLTag* deve retornar os comandos HTML
         convertidos no par√¢metro *ReplaceText*. O valor retornado pode conter tags
         HTML transparentes para outro produtor de p√°gina converter.
         - Por exemplo:
           - Um produtor de p√°gina pode ter um modelo que representa o formato
             do HTTP final da resposta. Ele pode ler a solicita√ß√£o HTTP e, para cada
             se√ß√£o da solicita√ß√£o, montar um conjunto de Tags transparentes
             em HTML com par√¢metros baseados na solicita√ß√£o.

           - Outro produtor de p√°gina pode pegar o conte√∫do do produtor da
             primeira p√°gina e interpret√°-los os par√¢metros.


     - **PAR√ÇMETROS**
       - **TagParams**:*TStringList*
         - O par√¢metro *TagParams* fornece a parte do par√¢metro da tag do template.
           - Cada string no objeto *tStrings* tem a forma *ParamName*=*Value*.
           - Use as propriedades *Names* e *Values* do objeto *tStrings* para analisar esses par√¢metros.

       - **TagString**:String*
         - Nome da tag no template.
           - Exemplo de template para preencher a data e hora no formato: *MM/DD hh:mm:ss*:

               ```pascal

                   &lt;html&gt;
                   &lt;body&gt;

                        DateTime in format &quot;MM/DD hh:mm:ss&quot;: &lt;b&gt;&lt;!--#DATETIME [-FORMAT=MM/DD hh:mm:ss-]#--&gt;&lt;/b&gt;
                        &lt;br&gt;

                   &lt;/body&gt;
                   &lt;/html&gt;

               ```

                - **NOTAS**
                  - **TagString** = *DATETIME*
                  - **Par√¢metro** = *FORMAT=MM/DD hh:mm:ss*
                    

               - **TagParams**: *FORMAT*
                 ```pascal

                    [- FORMAT=MM/DD hh:mm:ss -]

                 ```

           - Exemplo de template para criar c√≥digo html *&lt;pre&gt;* **lista de arquivos da pasta atual e subpastas** &lt;/pre&gt;:

               ```pascal

                   &lt;html&gt;
                   &lt;body&gt;

                        &lt;h1&gt; Teste do componente PageProducer &lt;/h1&gt;
                        
                        &lt;pre&gt;
                            &lt;!--# tgCustom [- ListFilesText=
                                                          Arquivo:
                                                            -&quot;~FileName&quot; -] #--&gt;
                        &lt;/pre&gt;

                   &lt;/body&gt;
                   &lt;/html&gt;

               ```
           - Exemplo de template para criar c√≥digo html de um link de nome BlogPsspPappBr:

               ```pascal

                   &lt;html&gt;
                   &lt;body&gt;

                        &lt;h3&gt; Meu Blog &lt;/h3&gt;
                        &lt;!--# tgLink [- BlogPsspPappBr=[a href=&quot;~url&quot; target=&quot;~target&quot; title=&quot;~title&quot;] ~text [/a]  -] #--&gt;

                   &lt;/body&gt;
                   &lt;/html&gt;


               ```


           - Exemplo de template para criar c√≥digo html que lista de links usando o nome dos arquivos da pasta atual e subpastas:

               ```pascal

                   &lt;html&gt;
                   &lt;body&gt;                         
                      &lt;!--# tgLink [- FindFilesAll=[a href=&quot;~url&quot; target=&quot;_blank&quot; title=&quot;~title&quot;] ~text [/a]  -] #--&gt;
                   &lt;/body&gt;
                   &lt;/html&gt;


               ```

             - **NOTAS**
               - **TagString** : *DATETIME*:

                 ```pascal

                    &lt;!--# DATETIME #--&gt;

                 ```

               - **TagParams**: *FORMAT*
                 ```pascal

                    [- FORMAT=MM/DD hh:mm:ss -]

                 ```

       - **ReplaceText** : *String*
           - Retorna o template preenchido para a classe que o executou.
             - Exemplo:

               ```pascal

                   procedure TFPWebModule2.func1callReplaceTag(Sender: TObject; const TagString:                      String; TagParams: TStringList; Out ReplaceText: String);
                   begin
                     if AnsiCompareText(TagString, 'DATETIME') = 0 then
                     begin
                       ReplaceText := FormatDateTime(TagParams.Values['FORMAT'], Now);
                     end;
                   end;

               ```

       - **aTag** : *TTag*
         - Usado para executar m√©todos produtores de c√≥digo baseado em templates.
           - *aTag* = *tgCustom*:
             - Executa o m√©todo virtual @link(DoOnHTMLTag_tgCustom):
               - O m√©todo @link(DoOnHTMLTag_tgCustom) deve processar os par√¢metros *Name*=*Values* de
                 **TagParams** definido pelo m√©todo que o executadou. @link(DoOnHTMLTag_tgCustom Veja mais):
               - **Exemplo**:
                 -

           - *atag* = *tgTable*
               - Executa a procedure virtual @link(DoOnHTMLTag_tgTable) para que seja preenchido
                 os seguintes par√¢metros:
                 - HEADER
                 - ONEROW
                 - NOTFOUND
                 - FOOTER


             - Os m√©todos que ser√£o executados depende do par√¢metro **aTag**:
               - **aTag** = *tgLink*
                 - DoOnHTMLTag_tgLink
                   - Par√¢metros esperados:
                     - href
                     - name
                     - type
                     - label
                     - Exemplo:

                       ```pascal

                          [- &lt;a href=&quot;#link&quot; name=&quot;name&quot; type=&quot;text/html&quot;&gt;label=Descri√ß√£o do Link&lt;/a&gt; -]

                       ```
               - **aTag** = *tgImage*
                 - DoOnHTMLTag_tgImage
                   - Par√¢metros esperados:
                     - src=Nome do arquivo de imagem
                     - alt = Mensagem a ser mostrada caso a imagem n√£o exista.
                     - title = Help
                     - Exemplo:

                       ```pascal

                          &lt;img src=&quot;images/image01.jpg&quot;
                               alt=&quot;Imagem de v√°rios reposit√≥rios e o servidor&quot;
                               title=&quot;Esta imagem mostra de forma visual como funciona as c√≥pias dos arquivos.&quot;&gt;

                       ```

               - **atag** = *tgImageMap*
                 - DoOnHTMLTag_tgImageMap

               - **atag** = *tgObject*
                 - DoOnHTMLTag_tgObject

               - **atag** = *tgEmbed*
                 - DoOnHTMLTag_tgEmbed

               - **atag** = *tgCustom*
                 - DoOnHTMLTag_tgCustom

     - **EXEMPLO**

         ```pascal

           &lt;html&gt;

           &lt;body&gt;
             DateTime in format &quot;MM/DD hh:mm:ss&quot;:
             &lt;b&gt;
               &lt;!--# DATETIME [-FORMAT=MM/DD hh:mm:ss-] #--&gt;
             &lt;/b&gt;

             &lt;br&gt;

             List of records:
             &lt;table class=&quot;beautify1&quot;&gt;
               &lt;tr class=&quot;beautify2&quot;&gt;
                 &lt;td class=&quot;beautify3&quot;&gt;

                   &lt;!--# tgTable

                     [-Header=
                       &lt;table bordercolorlight=&quot;#6699CC&quot; bordercolordark=&quot;#E1E1E1&quot; class=&quot;Label&quot;&gt;
                         &lt;tr class=&quot;Label&quot; align=center bgcolor=&quot;#6699CC&quot;&gt;
                           &lt;th&gt;
                             &lt;font color=&quot;white&quot;&gt;~Column1&lt;/font&gt;
                           &lt;/th&gt;
                           &lt;th&gt;
                             &lt;font color=&quot;white&quot;&gt;~Column2&lt;/font&gt;
                           &lt;/th&gt;
                         &lt;/tr&gt;
                     -]

                     [- OneRow =
                       &lt;tr bgcolor=&quot;#F2F2F2&quot; class=&quot;Label3&quot; align=&quot;center&quot;&gt;
                         &lt;td&gt;~Column1Value&lt;/td&gt;
                         &lt;td&gt;~Column2value&lt;/td&gt;
                       &lt;/tr&gt;
                     -]
                     .
                     .snip, and so on more parameters if needed
                     .
                     [- NotFound=
                       &lt;tr class=&quot;Error&quot;&gt;
                         &lt;td&gt;There are no entries found.&lt;/td&gt;
                       &lt;/tr&gt;
                     -]

                     [-Footer=
                       &lt;/table&gt;
                     -]

                   #--&gt;

                 &lt;/td&gt;
               &lt;/tr&gt;
             &lt;/table&gt;
           &lt;/body&gt;

           &lt;/html&gt;

         ```

     - @url(&quot;#&quot; üîù)

  }
  Public  procedure DoOnHTMLTag (Sender : TObject;
                                 aTag :TTag;
                                 Const TagString : String;
                                 TagParams:TStringList;
                                 Out ReplaceText : String);

  {: O m√©todo @name √© passado para *@link(FPTemplate.OnReplaceTag)* com objetivo de executar
     os produtor c√≥digo da classe.

     - NOTA
       - O m√©todo FPTemplate.OnReplaceTag pode ser definido para que possa customizar
         essa classe

  }
  private procedure DoReplaceTag_Default(Sender: TObject;  const TagString: String;TagParams: TStringList; Out ReplaceText: String);
</code></pre>
<p>end;</p>
<p>Resourcestring</p>
<p>{: O recurso <strong>@name</strong> deve ser usado nos templates para o componente <em>TBasePageProducer</em>.</p>
<pre><code class="hljs"> - PAR√ÇMETROS
   - %s      = Alias ou Nome do template;
   - ~url    = Endere√ßo do link
   - ~target = Destino onde a p√°gina deve ser aberta, se vazio abre na aba atual.
   - ~title  = Documenta√ß√£o do link
   - ~text   = Descri√ß√£o do link

 - Exemplo de uso:

   ```pascal



   ```
</code></pre>
<p>}
Template_html_tglink = '<!--# tgLink [- %s=[a href="~url" target="~target" title="~title"] ~text [/a]  -] #-->';</p>
<p>procedure register;</p>
<p>implementation</p>
<p>procedure register;
begin</p>
<p>end;</p>
<p>procedure TBasePageProducer.SetOnHTMLTag(const aOnHTMLTag: Boolean);
Begin
If aOnHTMLTag
Then with TObjectsMethods do
Begin
//se tiver assinalado deve ser descartado
If isValidPtr(_FPTemplate)
Then Discard(TObject(_FPTemplate));</p>
<p>//          Method.code := self.MethodAddress('DoOnHTMLTag');
{          If Method.code &lt;&gt; nil
Then Begin}
If TFPTemplate=nil
Then Begin
FPTemplate := TFPTemplate.Create;
<a href="//FPTemplate.StripParamQuotes">//FPTemplate.StripParamQuotes</a> := false; N√£o encontrei no fptemplate
End;
//                 Method.Data  := self;
FPTemplate.OnReplaceTag := DoReplaceTag_Default;//DoOnHTMLTagEvent;
_OnHTMLTag := True;
{               End
Else _OnHTMLTag := false;}
End
Else Begin
TObjectsMethods.Discard(TObject(_FPTemplate));
_OnHTMLTag := false;
End;
End;</p>
<p>procedure TBasePageProducer.SetHTMLFile(const aHTMLFile: TFileName);</p>
<p>Begin
If (aHTMLFile='') or (TObjectsMethods.FileExists(aHTMLFile))
Then Begin
OnHTMLTag := true;
If OnHTMLTag
Then begin
//function ExtractRelativePath(const BaseName, DestName: string): string; overload;
FPTemplate.FileName:= aHTMLFile
end;
End
Else Begin
OnHTMLTag := False;
TObjectsMethods.TaStatus  := TObjectsMethods.ArquivoNaoEncontrado2;
end;
end;</p>
<p>function TBasePageProducer.GetHTMLFile: TFileName;
Begin
If OnHTMLTag
Then Result := FPTemplate.FileName
Else Result := '';
end;</p>
<p>function TBasePageProducer.SaveHTMLContentToFile(FileNameDest: AnsiString): Integer;
Var
PathDest : AnsiString;
F        : Text;</p>
<p>begin
Result := -1;
If OnHTMLTag
Then with TObjectsMethods do
Begin
Try  //Except
PathDest := ExtractFileDir(FileNameDest);</p>
<pre><code class="hljs">       if Not DirectoryExists(PathDest)
       Then ok := CreateDir(PathDest)
       Else ok := true;

       If ok
       Then Begin
              AssignFile(F,FileNameDest);

              {$I+}
              rewrite(f);
              {$I-}

              Result := IoResult ;

              If Result = 0
              Then Begin
                     {$I+}
                     write(F,self.HTMLContent);
                     {$I-}
                     Result := IoResult;

                     close(f) ;
                   End;

            End;
     Except
       if Result = 0
       then Result :=   Erro_Excecao_inesperada ;
       Raise
     end;
   End;
</code></pre>
<p>end;</p>
<p>function TBasePageProducer.SaveHTMLContentToFile: Integer;
Begin
Result := -1;
End;</p>
<p>procedure TBasePageProducer.SetHTMLDoc(const aHTMLDoc: tStrings);
Begin
_HTMLDoc := aHTMLDoc;</p>
<p>OnHTMLTag := true;
If OnHTMLTag
Then begin
{O componente fpTemplate n√£o existe op√ß√£o de template em mem√≥ria.
Para implementar HTMLDoc √© necess√°rio criar arquivo tempor√°rio.
}
<a href="//FPTemplate.HTMLDoc">//FPTemplate.HTMLDoc</a> := aHTMLDoc;</p>
<pre><code class="hljs">   end;
</code></pre>
<p>end;</p>
<p>procedure TBasePageProducer.SetHTMLFile;
begin</p>
<p>end;</p>
<p>function TBasePageProducer.GetHTMLDoc: tStrings;
Begin
{O componente fpTemplate n√£o existe op√ß√£o de template em mem√≥ria.
Para implementar HTMLDoc √© necess√°rio criar arquivo tempor√°rio.
}
//If OnHTMLTag
//Then Result := TFPTemplate.HTMLDoc
//Else Result := nil;
end;</p>
<p>constructor TBasePageProducer.create(aOwner:TComponent);
begin
inherited create(aOwner);</p>
<p>_FPTemplate := TFPTemplate.Create;
with FPTemplate do
begin
AllowTagParams := true;
StartDelimiter := '<!--#';
    EndDelimiter := '#-->';
OnReplaceTag := DoReplaceTag;
end;
end;</p>
<p>destructor TBasePageProducer.destroy;
begin
freeAndnil(_FPTemplate);
inherited destroy;
end;</p>
<p>function TBasePageProducer.GetHTMLContent: AnsiString;
{&lt; NortSoft
Retorna O c√≥digo HTML implementados em:
1 - TvDialogs.TButton      Retorna o c√≥digo Html associado ao bot√£o
2 - ViEditor.TDmxEditor    Retorna o codigo Html associado ao Dmx
3 - ViEditor.TLIsDialog   Retorna a lista html
4 - tvDMXBUF.TDmxEditBuf;  Retorna o formul√°rio em forma de gride
5 - View.TWindow           Retorna todos os c√≥digos html dentro da windows
6 - TvDialogs.TDialog      Retorna o formul√°rio completo <html><head> </head> <body> </body>&lt;/html
}
Begin
If OnHTMLTag
Then Result := FPTemplate.GetContent
Else Result := '';
end;</p>
<p>procedure TBasePageProducer.DoOnHTMLTag(Sender: TObject;  aTag :TTag; const TagString: String; TagParams: TStringList; out ReplaceText: String);</p>
<p>{ Original:
The TagString parameter is the tag name of the HTML-transparent tag.
If the Tag parameter is tgCustom, TagString should be used to determine what conversion to perform.
The TagParams parameter gives the parameter portion of the HTML-transparent tag.
Each string in the tStrings object has the form ParamName=Value.
Use the Names and Values properties of the tStrings object to parse these parameters.</p>
<p>The DoOnHTMLTag event handler should return the converted HTML commands in the ReplaceText parameter.</p>
<p>The returned value can contain HTML-transparent tags for another page producer to convert.</p>
<p>For example, one page producer might have a template that represents the format of the final HTTP
response. It could read the HTTP request and for each section in the request assemble a set of
HTML-transparent tags with parameters based on the request.
Another page producer might take the content of the first page producer, and interpret those
parameters.
}</p>
<p>{</p>
<p>Evento OnHTMLTag
O componente TFPTemplate apresenta apenas um evento: o evento OnHTMLTag.
√â nesse evento que √© definido o c√≥digo HTML usado para substituir os tags
transparentes lidos pelo TFPTemplate.
O evento √© chamado uma vez para cada tag transparente encontrado.</p>
<pre><code class="hljs"> OnHTMLTag recebe v√°rios par√¢metros importantes. Veja quais s√£o, no seguinte c√≥digo b√°sico do evento.

 Procedure TwebModule1.TFPTemplate1HTMLTag(Sender: Tobject; Tag: Ttag; const      TagString:String; TagParams: Tstring; var ReplaceText: String);
 Begin

 end;

 O par√¢metro TagString recebe o nome do tag transparente. Para o tag transparente &lt;#data&gt; por exemplo,
 TagString seria ‚Äúdata‚Äù. O texto no par√¢metro TagString deve ser verificado pelo programa, para determinar
 o c√≥digo HTML a ser usado para a substitui√ß√£o do tag transparente.

 O par√¢metro ReplaceText √© passado por refer√™ncia para o c√≥digo do evento OnHTMLTag. √â inicialmente um
 String vazio. Dentro do c√≥digo para evento, ReplaceText deve receber um String com o c√≥digo HTML
 usado para substituir o tag transparente.

 Em *TagParams* s√£o armazenados os par√¢metros do tag transparente. Os par√¢metros s√£o armazenados na forma
 *Nome*=*Valor* e podem ser acessados usando as propriedades *Names* e *Values*. Por exemplo, para o tag:

 &lt;#calend√°rio ano=2023 m√™s=12&gt;

 Ter√≠amos o seguinte:      
 TagParams.Names[0] = ‚Äòano‚Äô
 TagParams.Names[1] = ‚Äòm√™s‚Äô
 TagParams.Values[‚Äòano‚Äô] = ‚Äò2023‚Äô
 TagParams.Values[‚Äòm√™s‚Äô] = ‚Äò12‚Äô

 Caso o tag transparente n√£o apresente par√¢metros, os valores retornados para Values e Names
 ser√£o tStrings vazios.
</code></pre>
<p>}
Begin
Case aTag of
tgCustom   : DoOnHTMLTag_tgCustom  (Sender,TagString,TagParams, ReplaceText);
tgLink     : DoOnHTMLTag_tgLink    (Sender,TagString,TagParams, ReplaceText);
tgImage    : DoOnHTMLTag_tgImage   (Sender,TagString,TagParams, ReplaceText);
tgTable    : DoOnHTMLTag_tgTable   (Sender,TagString,TagParams, ReplaceText);
tgImageMap : DoOnHTMLTag_tgImageMap(Sender,TagString,TagParams, ReplaceText);
tgObject   : DoOnHTMLTag_tgObject  (Sender,TagString,TagParams, ReplaceText);
tgEmbed    : DoOnHTMLTag_tgEmbed   (Sender,TagString,TagParams, ReplaceText)
else         DoReplaceTag(Sender,TagString,TagParams, ReplaceText)
End;
end;</p>
<p>procedure TBasePageProducer.DoReplaceTag_Default(Sender: TObject; const TagString: String; TagParams: TStringList; out ReplaceText: String);
begin</p>
<p>if AnsiCompareText(TagString, 'tgCustom') = 0
then DoOnHTMLTag_tgCustom(Sender,TagString,TagParams,ReplaceText)
else  if AnsiCompareText(TagString, 'tgLink') = 0
then DoOnHTMLTag_tgLink(Sender,TagString,TagParams,ReplaceText)
else if AnsiCompareText(TagString, 'tgImage') = 0
then DoOnHTMLTag_tgImage(Sender,TagString,TagParams,ReplaceText)
else if AnsiCompareText(TagString, 'tgTable') = 0
then DoOnHTMLTag_tgTable(Sender,TagString,TagParams,ReplaceText)
else if AnsiCompareText(TagString, 'tgImageMap') = 0
then DoOnHTMLTag_tgImageMap(Sender,TagString,TagParams,ReplaceText)
else if AnsiCompareText(TagString, 'tgObject') = 0
then DoOnHTMLTag_tgImageMap(Sender,TagString,TagParams,ReplaceText)
else if AnsiCompareText(TagString, 'tgEmbed') = 0
then DoOnHTMLTag_tgEmbed(Sender,TagString,TagParams,ReplaceText)
else DoReplaceTag(Sender,TagString,TagParams,ReplaceText);
end;</p>
<p>end.</p>

        <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
        
    </body>
    </html>